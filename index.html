<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aethel Design | Mustufa Portfolio</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <style>
    :root { --glow-color: 0,192,255; --ai-glow: 255,215,0; }
    body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color:#E0F2F1; background:#030712; overflow-x:hidden; }
    .text-glow { text-shadow:0 0 4px rgba(var(--glow-color),0.6),0 0 8px rgba(var(--glow-color),0.4),0 0 12px rgba(var(--glow-color),0.2); }
    .input-glow{width:100%;padding:12px;background:rgba(255,255,255,0.05);border:1px solid rgba(var(--glow-color),0.3);border-radius:8px;color:#fff;}
    .cta-button{transition:all .25s;box-shadow:0 0 10px rgba(var(--glow-color),0.7);border:2px solid rgba(var(--glow-color),0.5)}
    .cta-button:hover{transform:scale(1.03);box-shadow:0 0 20px rgba(var(--glow-color),1)}
    .site-header{position:fixed;top:0;left:0;width:100%;background:rgba(3,7,18,0.75);backdrop-filter:blur(4px);z-index:40}
    #bg-canvas{position:fixed;inset:0;z-index:0}
    .main-content{position:relative;z-index:10;min-height:100vh;padding-top:6.5rem}
    .loader{border:3px solid rgba(255,255,255,0.2);border-top:3px solid #ffd700;border-radius:50%;width:14px;height:14px;animation:spin 1s linear infinite;display:inline-block;margin-right:8px;vertical-align:middle}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
  </style>
</head>
<body>

  <!-- audio (optional) -->
  <audio id="bg-music" loop>
    <source src="golden brown ending part looped (slowed _ reverb).mp3" type="audio/mpeg">
  </audio>
  <button id="mute-toggle" aria-label="Toggle audio" style="position:fixed;right:20px;top:20px;z-index:50;padding:10px;border-radius:50%;background:rgba(0,192,255,0.08);border:1px solid rgba(0,192,255,0.2);">
    <div id="speaker-icon"></div>
  </button>

  <!-- three.js background -->
  <div id="bg-canvas"></div>

  <div class="main-content flex flex-col items-center p-6 md:p-12 text-center">
    <div class="site-header w-full py-4 px-8 flex justify-between items-center">
      <h2 class="text-xl font-bold text-glow">Aethel Design</h2>
      <nav class="space-x-4">
        <button onclick="showView('home')" class="text-cyan-300 hover:text-white">Home</button>
        <button onclick="showView('contact')" class="text-cyan-300 hover:text-white">Order Now</button>
      </nav>
    </div>

    <!-- Home -->
    <div id="home-view" class="w-full max-w-4xl mx-auto">
      <header class="mb-8">
        <h1 class="text-5xl md:text-7xl font-extrabold text-white text-glow mb-2">Aethel Design</h1>
        <p class="text-xl md:text-2xl text-cyan-300">Graphics Designer & Video Editor — Mustufa</p>
      </header>

      <section class="bg-white/5 p-6 rounded-xl border border-cyan-500/20 mb-6">
        <h2 class="text-2xl font-semibold text-white text-glow mb-2">About Mustufa</h2>
        <p class="text-gray-200">Hello! I'm <b>Mustufa</b>, a passionate visual creator specializing in high-impact design and editing. I excel at crafting engaging <b>graphics</b> and dynamic <b>video edits</b>, turning raw ideas into polished, professional-grade content. My workflow is built on <b>speed</b>, modernity, and <b>precision</b>, allowing me to transform initial concepts into <b>strong</b> visual <b>stories</b> that capture attention across any platform.I deliver clean, fast, and modern results, pushing for fresh aesthetics in every project. Let's collaborate to build something exceptional..</p>
      </section>

      <div class="flex gap-4 justify-center mb-6">
        <button onclick="showView('contact')" class="cta-button px-6 py-3 rounded-full bg-cyan-700/30 text-white font-bold">Start Your Project</button>
      </div>

      <section class="bg-white/5 p-4 rounded-xl border border-cyan-500/20 max-w-xl mx-auto">
        <p class="text-gray-300"><span class="font-medium text-cyan-300">Email:</span> mustafaincidius@gmail.com</p>
        <p class="text-gray-300"><span class="font-medium text-cyan-300">Phone:</span> 03351271603</p>
      </section>
    </div>

    <!-- Contact -->
    <div id="contact-view" class="w-full max-w-3xl mx-auto hidden mt-8">
      <section class="p-8 bg-white/5 rounded-xl border border-cyan-500/20 shadow-2xl text-left">
        <h1 class="text-3xl font-extrabold text-glow mb-2">Order Your Custom Project</h1>
        <p class="text-cyan-300 mb-6">Fill the brief. Use the AI refine tool to make the description crisp — then send it directly to my Gmail.</p>

        <form id="contact-form" class="space-y-4">
          <input class="input-glow" name="Client Name" placeholder="Your name" required />
          <input class="input-glow" name="Client Email" type="email" placeholder="your@email.com" required />
          <input class="input-glow" name="Phone" placeholder="+92 3XX XXXXXXX" required />
          <input class="input-glow" name="Budget" type="number" placeholder="Budget (USD)" required />

          <label class="text-cyan-200 text-glow">Project Description</label>
          <div class="flex gap-3 mb-2">
            <button id="refine-btn" type="button" class="px-4 py-2 rounded-full font-semibold animated-button-ai">✨ Refine with AI</button>
            <button id="use-refined-btn" type="button" class="px-4 py-2 rounded-full border border-yellow-300 text-yellow-300 hidden">Use refined text</button>
            <div id="refine-status" class="text-yellow-300 ml-2 self-center"></div>
          </div>

          <textarea id="description" name="Project Description" class="input-glow" rows="6" placeholder="I need a 60-second cinematic video..." required></textarea>

          <div id="form-status" class="text-sm text-center text-green-300"></div>

          <button type="submit" class="cta-button w-full px-6 py-3 rounded-xl bg-cyan-700/50 text-white font-bold">Send Project Details</button>
        </form>
      </section>
    </div>
  </div>

<script>
/* ========== CONFIG - REPLACE THESE ========== */
// EmailJS: replace with your EmailJS public key
const EMAILJS_PUBLIC_KEY = "4jVEen1yun6fU-FJw";

/* Your EmailJS service & template (you gave these already) */
const EMAILJS_SERVICE_ID = "service_p08nyl3";
const EMAILJS_TEMPLATE_ID = "template_cben6rf";

/* Backend endpoint that calls Gemini. Deploy the server from server.js below.
   Example: https://your-deploy-url.com/api/refine
*/
const REFINER_ENDPOINT = "/api/refine"; // if you deploy server on same host. Otherwise use full URL.

(function(){ emailjs.init(EMAILJS_PUBLIC_KEY); })();

/* ---------- UI & view switching ---------- */
function showView(view) {
  document.getElementById('home-view').classList.add('hidden');
  document.getElementById('contact-view').classList.add('hidden');
  document.getElementById(`${view}-view`).classList.remove('hidden');
  window.scrollTo({top:0,behavior:'smooth'});
}

/* ---------- three.js background (keeps your previous look) ---------- */
function initThreeJS(){
  const container = document.getElementById('bg-canvas');
  const width = innerWidth, height = innerHeight;
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, width/height, 0.1, 1000);
  camera.position.z = 100;
  const renderer = new THREE.WebGLRenderer({ antialias:true });
  renderer.setSize(width,height);
  container.appendChild(renderer.domElement);
  const geometry = new THREE.BufferGeometry();
  const positions=[], colors=[];
  const color = new THREE.Color();
  for (let i=0;i<500;i++){
    positions.push(THREE.MathUtils.randFloatSpread(400), THREE.MathUtils.randFloatSpread(400), THREE.MathUtils.randFloatSpread(400));
    color.setHSL(0.5 + Math.random()*0.2, 1, 0.6);
    colors.push(color.r,color.g,color.b);
  }
  geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions,3));
  geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors,3));
  const material = new THREE.PointsMaterial({ size:1.5, vertexColors:true, transparent:true });
  const particles = new THREE.Points(geometry, material);
  scene.add(particles);
  window.addEventListener('resize', ()=>{ renderer.setSize(innerWidth,innerHeight); camera.aspect = innerWidth/innerHeight; camera.updateProjectionMatrix(); });
  (function animate(){ requestAnimationFrame(animate); particles.rotation.x += 0.0005; particles.rotation.y += 0.001; renderer.render(scene,camera); })();
}

/* ---------- audio control ---------- */
function setupAudioControl(){
  const music = document.getElementById('bg-music');
  const button = document.getElementById('mute-toggle');
  const icon = document.getElementById('speaker-icon');
  const iconOn = '<svg fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5" style="width:18px;height:18px"><path d="M13.5 4.06c0-1.34-1.64-2-2.58-1.28L5.5 7.5H3.8A2.2 2.2 0 001.5 9.7v4.5c0 1.2 1 2.25 2.2 2.25h1.7l5.5 4.7c.94.72 2.58.05 2.58-1.28V4.06z"/></svg>';
  const iconOff = '<svg fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5" style="width:18px;height:18px"><path d="M4 9h3l4-4v14l-4-4H4zm12 3a4 4 0 00-1.2-2.8l1.4-1.4A6 6 0 0120 12a6 6 0 01-3.8 5.2l-1.4-1.4A4 4 0 0016 12z"/></svg>';
  const update = ()=>{ icon.innerHTML = music.paused ? iconOff : iconOn; }
  button.addEventListener('click', ()=>{ if (music.paused) music.play(); else music.pause(); update(); });
  update();
}

/* ---------- AI refine feature ---------- */
const API_KEY = "AIzaSyDWbTWWoKJSmsiOvhsm78MBAB_7AC2cjmk"; // Add Gemini API key if needed
        const MODEL_NAME = "gemini-2.0-flash";
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${API_KEY}`;

        async function fetchWithRetry(url, options, maxRetries = 3) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const res = await fetch(url, options);
                    if (!res.ok) throw new Error(`HTTP ${res.status}`);
                    return res;
                } catch (e) {
                    if (i === maxRetries - 1) throw e;
                    await new Promise(r => setTimeout(r, 1000 * (i + 1)));
                }
            }
        }

        async function refineProjectDescription() {
            const textarea = document.getElementById('description');
            const statusDiv = document.getElementById('ai-status');
            const aiButton = document.querySelector('.animated-button-ai');
            const userPrompt = textarea.value.trim();

            if (userPrompt.length < 10) {
                statusDiv.innerHTML = '<span style="color:red;">Please enter a longer description.</span>';
                return;
            }

            aiButton.disabled = true;
            statusDiv.innerHTML = '<span class="loader"></span> Refining description...';

            const payload = {
                contents: [
                    { role: "user", parts: [{ text: `You are a creative consultant. Refine this brief professionally: ${userPrompt}` }] }
                ]
            };

            try {
                const res = await fetchWithRetry(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const data = await res.json();
                const text = data?.candidates?.[0]?.content?.parts?.[0]?.text;
                if (text) textarea.value = text;
                statusDiv.innerHTML = '<span style="color:#ffd700;">✨ Refined successfully!</span>';
            } catch {
                statusDiv.innerHTML = '<span style="color:red;">Error generating content.</span>';
            } finally {
                aiButton.disabled = false;
            }
        }

        function showView(view) {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('contact-view').classList.add('hidden');
            document.getElementById(`${view}-view`).classList.remove('hidden');
            setTimeout(() => document.getElementById('main-content').classList.add('loaded'), 50);
        }

        function initThreeJS() {
            const container = document.getElementById('bg-canvas');
            const width = window.innerWidth, height = window.innerHeight;
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            camera.position.z = 100;

            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(width, height);
            container.appendChild(renderer.domElement);

            const geometry = new THREE.BufferGeometry();
            const positions = [], colors = [];
            const color = new THREE.Color();
            for (let i = 0; i < 500; i++) {
                positions.push(THREE.MathUtils.randFloatSpread(400));
                positions.push(THREE.MathUtils.randFloatSpread(400));
                positions.push(THREE.MathUtils.randFloatSpread(400));
                color.setHSL(0.5 + Math.random() * 0.2, 1, 0.6);
                colors.push(color.r, color.g, color.b);
            }
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            const material = new THREE.PointsMaterial({ size: 1.5, vertexColors: true, transparent: true });
            const particles = new THREE.Points(geometry, material);
            scene.add(particles);

            window.addEventListener('resize', () => {
                renderer.setSize(window.innerWidth, window.innerHeight);
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
            });

            function animate() {
                requestAnimationFrame(animate);
                particles.rotation.x += 0.0005;
                particles.rotation.y += 0.001;
                renderer.render(scene, camera);
            }
            animate();
        }

/* ---------- EmailJS form submit ---------- */
const form = document.getElementById('contact-form');
const formStatus = document.getElementById('form-status');

form.addEventListener('submit', function(e) {
  e.preventDefault();
  formStatus.innerHTML = '<span class="loader"></span> Sending...';

  emailjs.sendForm(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, this)
    .then(() => {
      formStatus.innerHTML = '<span style="color:#7fff7f">✅ Sent — I will contact you soon.</span>';
      form.reset();
      // hide any preview
      const preview = document.getElementById('ai-preview');
      if (preview) preview.remove();
    }, (err) => {
      console.error(err);
      formStatus.innerHTML = '<span style="color:#ff6b6b">❌ Failed to send. Try again or message me directly.</span>';
    });
});

/* ---------- boot ---------- */
window.onload = function(){
  initThreeJS();
  setupAudioControl();
  // show home by default
  showView('home');
};
</script>

</body>
</html>
